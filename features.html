<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Features &mdash; MapDB</title>
    
    <link rel="stylesheet" href="_static/sphinx13.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="MapDB" href="index.html" />
    <link rel="up" title="Contents" href="contents.html" />
    <link rel="next" title="Who is using MapDB" href="success.html" />
    <link rel="prev" title="Credits" href="credits.html" />
 
    <style type="text/css">
      table.right { float: right; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>
    <script type="text/javascript">
      // intelligent scrolling of the sidebar content
      $(window).scroll(function() {
        var sb = $('.sphinxsidebarwrapper');
        var win = $(window);
        var sbh = sb.height();
        var offset = $('.sphinxsidebar').position()['top'];
        var wintop = win.scrollTop();
        var winbot = wintop + win.innerHeight();
        var curtop = sb.position()['top'];
        var curbot = curtop + sbh;
        // does sidebar fit in window?
        if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
            sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
            sb.css('top', $u.min([winbot - sbh - offset - 20,
                                  $(document).height() - sbh - 200]));
          }
        }
      });
    </script>

<!-- google analytics-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42074659-1', 'auto');
  ga('send', 'pageview');

</script>

  </head>
  <body role="document">
<div class="pageheader">
  <ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="doc/getting-started.html">Intro</a></li>
    <li><a href="doc/index.html">Docs</a></li>
    <li><a href="https://github.com/jankotek/mapdb">Github</a></li>
  </ul>
  <div>
    <a href="index.html">
      <img src="_static/logo.png" alt="MapDB" />
    </a>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="success.html" title="Who is using MapDB"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="credits.html" title="Credits"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Home</a>&nbsp;|</li>
        <li><a href="contents.html">Documentation</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="contents.html" accesskey="U">Contents</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Features</a><ul>
<li><a class="reference internal" href="#highlights">Highlights</a></li>
<li><a class="reference internal" href="#caching">Caching</a><ul>
<li><a class="reference internal" href="#hashtable-instance-cache">HashTable instance cache</a></li>
<li><a class="reference internal" href="#lru-instance-cache">LRU instance cache</a></li>
<li><a class="reference internal" href="#weak-reference-instance-cache">Weak reference instance cache</a></li>
<li><a class="reference internal" href="#soft-reference-instance-cache">Soft reference instance cache</a></li>
<li><a class="reference internal" href="#hard-reference-instance-cache">Hard reference instance cache</a></li>
</ul>
</li>
<li><a class="reference internal" href="#serialization">Serialization</a><ul>
<li><a class="reference internal" href="#hand-coded-serializers">Hand Coded Serializers</a></li>
<li><a class="reference internal" href="#generic-pojo-serialization">Generic POJO serialization</a></li>
<li><a class="reference internal" href="#asynchronous-writes">Asynchronous Writes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-features">Other features</a><ul>
<li><a class="reference internal" href="#transparent-compression">Transparent compression</a></li>
<li><a class="reference internal" href="#transparent-encryption">Transparent encryption</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="credits.html"
                        title="previous chapter">Credits</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="success.html"
                        title="next chapter">Who is using MapDB</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/features.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="features">
<h1>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h1>
<p>Most DBs engines juggle with byte arrays and leave serialization and
caching to user. MapDB goes much further and it integrates instance
cache, serialization and storage into single library. This seamless
integration is necessary to achieve best user experience. In most cases
MapDB &#8216;just works&#8217;.</p>
<p>Tight integration also allows many performance optimization tricks.
MapDB blurs difference between POJO (Plain Old Java Object) and storage
records. So MapDB collections can have comparable performance to their
Java Collections Framework counterparts.</p>
<div class="section" id="highlights">
<h2>Highlights<a class="headerlink" href="#highlights" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Drop-in replacement for ConcurrentTreeMap and ConcurrentHashMap.</li>
<li>Outstanding performance comparable to low-level native DBs
(TokyoCabinet, LevelDB)</li>
<li>Scales well on multi-core CPUs (fine grained locks, concurrent trees)</li>
<li>Very easy configuration using builder class</li>
<li>Space-efficient transparent serialization.</li>
<li>Instance cache to minimise deserialization overhead</li>
<li>Various write modes (transactional journal, direct, async or append)
to match various requirements.</li>
<li>ACID transactions with full MVCC isolation</li>
<li>Very fast snapshots</li>
<li>Very flexible; works equally well on an Android phone and a
supercomputer with multi-terabyte storage.</li>
<li>Modular &amp; extensible design; most features (compression, cache, async
writes) are just <code class="docutils literal"><span class="pre">Engine</span></code> wrappers. Introducing new functionality
(such as network replication) is very easy.</li>
<li>Highly embeddable; 200 KB no-deps jar (50KB packed), pure java, low
memory &amp; CPU overhead.</li>
<li>Transparent encryption, compression, checksums and other optional
stuff.</li>
</ul>
</div>
<div class="section" id="caching">
<h2>Caching<a class="headerlink" href="#caching" title="Permalink to this headline">¶</a></h2>
<p>MapDB provides instance cache to minimize deserialization overhead.
Instance cache is tightly integrated with storage engine and is one of
the reasons why MapDB is so fast.</p>
<p>MapDB does not use fixed size disk pages. It also does not have settings
like page size or disk cache. To cache binary data read from disk MapDB
relies on operating system. MapDB performance strongly depends on
operating system selection and we recommend using Linux with latest JVM
for best performance</p>
<div class="section" id="hashtable-instance-cache">
<h3>HashTable instance cache<a class="headerlink" href="#hashtable-instance-cache" title="Permalink to this headline">¶</a></h3>
<p>This is fixed size random removal cache. It has very small overhead and
is very fast. It uses fixed size hash table and entries are removed
randomly on hash collisions. Is activated by default with size 32768.</p>
</div>
<div class="section" id="lru-instance-cache">
<h3>LRU instance cache<a class="headerlink" href="#lru-instance-cache" title="Permalink to this headline">¶</a></h3>
<p>Fixed size cache with Least Recently Used entry removal. It uses Cleanup
daemon thread. Has larger overhead compared to HashTable, but will have
better results object deserialization is expensive. Is activated by
DBMaker.cacheLRUEnable()</p>
</div>
<div class="section" id="weak-reference-instance-cache">
<h3>Weak reference instance cache<a class="headerlink" href="#weak-reference-instance-cache" title="Permalink to this headline">¶</a></h3>
<p>Unbounded instance cache with entries removed after GC collection. It
uses Weak reference so cache entry can be Garbage Collected when no
longer referenced. It uses Cleanup daemon thread. Is activated by
DBMaker.cacheWeakRefEnable()</p>
</div>
<div class="section" id="soft-reference-instance-cache">
<h3>Soft reference instance cache<a class="headerlink" href="#soft-reference-instance-cache" title="Permalink to this headline">¶</a></h3>
<p>Unbounded instance cache with entries removed after GC collection. It
uses Soft reference so entry cache entry can be Garbage Collected when
no longer referenced. It uses Cleanup daemon thread. Is activated by
DBMaker.cacheSoftRefEnable()</p>
</div>
<div class="section" id="hard-reference-instance-cache">
<h3>Hard reference instance cache<a class="headerlink" href="#hard-reference-instance-cache" title="Permalink to this headline">¶</a></h3>
<p>Unbounded instance cache with all entries removed when heap memory runs
low. All cache entries are stored in HashMap with hard reference. To
prevent OutOfMemoryError free heap memory is monitored, when it runs
bellow 25% all entries are removed from cache. This cache is often
faster than Soft/Weak Cache, it requires much less Garbage Collections.
Use this cache if you have large heap and want maximal performance. Is
activated by DBMaker.cacheHardRefEnable()</p>
</div>
</div>
<div class="section" id="serialization">
<h2>Serialization<a class="headerlink" href="#serialization" title="Permalink to this headline">¶</a></h2>
<p>MapDB has its own space efficient serialization tightly optimized for
minimal CPU overhead. In many cases it outperforms specialized
serialization frameworks such as Kryo or Protobufs.</p>
<p>MapDB serialization tries to mimic Standard Java Serialization behavior.
So you may use Serializable marker interface, customize binary format
with Externalizable methods and so on.</p>
<p>MapDB serialization framework is completely transparent and activated by
default. In most cases you wont even realize it is there. But for best
performance you may also bypass it and use custom binary format by
implementing
<a class="reference external" href="http://www.mapdb.org/apidocs/org/mapdb/Serializer.html">Serializer</a>.</p>
<div class="section" id="hand-coded-serializers">
<h3>Hand Coded Serializers<a class="headerlink" href="#hand-coded-serializers" title="Permalink to this headline">¶</a></h3>
<p>MapDB hand coded serializers for most classes in <code class="docutils literal"><span class="pre">java.lang</span></code> and
<code class="docutils literal"><span class="pre">java.util</span></code> packages. Custom serializers have maximal space efficiency
and very low CPU overhead. For example:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">j.l.Date</span></code> requires only 9 bytes: 1-byte-long serialization header
and 8-byte-long timestamp.</li>
<li>For <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">String(&quot;&quot;)</span></code> or <code class="docutils literal"><span class="pre">Long(3)</span></code> MapDB writes only
single-byte serialization header.</li>
<li>For array list and other collections MapDB writes serialization
header, packed size and than data itself.</li>
</ul>
</div>
<div class="section" id="generic-pojo-serialization">
<h3>Generic POJO serialization<a class="headerlink" href="#generic-pojo-serialization" title="Permalink to this headline">¶</a></h3>
<p>For other classes MapDB uses generic POJO serialization. It traverses
and serializes object graph, handling stuff like forward/backward
references in process. MapDB stores class structure (names, fields
types) on centralized space, this greatly reduces space overhead with
larger number of records. For example take following class:</p>
<div class="highlight-python"><div class="highlight"><pre>class Person{ int age = 40; String nickname = &quot;Agent Smith&quot;; }
</pre></div>
</div>
<p>Standard Java Serialization stores this class in 104 bytes with many
redundant information such as field names:</p>
<div class="highlight-python"><div class="highlight"><pre>__srorg.apache.jdbm.geecon.Person O IageL __ __ nicknametLjava/lang/String;xp(tAgent Smith
</pre></div>
</div>
<p>MapDB serialization stores this record with only 15 bytes!</p>
</div>
<div class="section" id="asynchronous-writes">
<h3>Asynchronous Writes<a class="headerlink" href="#asynchronous-writes" title="Permalink to this headline">¶</a></h3>
<p>MapDB performs serialization and storage modifications in background
thread. This behaviour is fully ACID compliant by default. Thanks to
Async Writes MapDB has high performance and low latency even under high
load. There is number of configuration option to fine-tune Async Writes
for your usage pattern.</p>
</div>
</div>
<div class="section" id="other-features">
<h2>Other features<a class="headerlink" href="#other-features" title="Permalink to this headline">¶</a></h2>
<p>MapDB has many other small features which would not fit on this page.
You may find more by reading <a class="reference external" href="http://www.mapdb.org/apidocs/org/mapdb/DBMaker.html">DBMaker
documentation</a>
or MapDB source codes.</p>
<div class="section" id="transparent-compression">
<h3>Transparent compression<a class="headerlink" href="#transparent-compression" title="Permalink to this headline">¶</a></h3>
<p>MapDB supports transparent compression using <a class="reference external" href="http://oldhome.schmorp.de/marc/liblzf.html">LZF
compressor</a>. It is very
fast compression with typical rates around 40%. It is tightly optimized
in does not require much internal copying and object allocations. It can
be enabled by DBMaker.compressionEnable()</p>
</div>
<div class="section" id="transparent-encryption">
<h3>Transparent encryption<a class="headerlink" href="#transparent-encryption" title="Permalink to this headline">¶</a></h3>
<p>MapDB allows storage encryption using <a class="reference external" href="http://en.wikipedia.org/wiki/XTEA">XTea
algorithm</a>. It is fast and sound
algorithm with 256bit keys. It is highly optimized for MapDB to minimize
internal copying. Other encryption algorithms can be used with some
extra coding. Encryption can be enabled by
DBMaker.encryptionEnable(String password)</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="success.html" title="Who is using MapDB"
             >next</a> |</li>
        <li class="right" >
          <a href="credits.html" title="Credits"
             >previous</a> |</li>
        <li><a href="index.html">Home</a>&nbsp;|</li>
        <li><a href="contents.html">Documentation</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="contents.html" >Contents</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, Jan Kotek.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>