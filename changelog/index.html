<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Changelog &mdash; MapDB</title>
    
    <link rel="stylesheet" href="../_static/sphinx13.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="MapDB" href="../" />
    <link rel="next" title="In-memory benchmarks" href="../benchmarks/" />
    <link rel="prev" title="Who is using MapDB" href="../success/" />
  
 
    <style type="text/css">
      table.right { float: right; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>
    <script type="text/javascript">
      // intelligent scrolling of the sidebar content
      $(window).scroll(function() {
        var sb = $('.sphinxsidebarwrapper');
        var win = $(window);
        var sbh = sb.height();
        var offset = $('.sphinxsidebar').position()['top'];
        var wintop = win.scrollTop();
        var winbot = wintop + win.innerHeight();
        var curtop = sb.position()['top'];
        var curbot = curtop + sbh;
        // does sidebar fit in window?
        if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
            sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
            sb.css('top', $u.min([winbot - sbh - offset - 20,
                                  $(document).height() - sbh - 200]));
          }
        }
      });
    </script>

<!-- google analytics-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42074659-1', 'auto');
  ga('send', 'pageview');

</script>

  
  <link rel="alternate" type="application/atom+xml"  href="../blog/atom.xml" title="MapDB Blog">
  
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head>
  <body role="document">
<div class="pageheader">
  <ul>
    <li><a href="../">Home</a></li>
    <li><a href="../doc/quick-start/">Quick start</a></li>
    <li><a href="../doc/">Docs</a></li>
    <li><a href="../blog/">Blog</a></li>
      <li><a href="../support/">Support</a></li>

      <li><a href="https://github.com/jankotek/mapdb">Github</a></li>
  </ul>
  <div>
    <a href="../">
      <img src="../_static/logo.png" alt="MapDB" />
    </a>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../benchmarks/" title="In-memory benchmarks"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="../success/" title="Who is using MapDB"
             accesskey="P">previous</a> |</li>
        <li><a href="../">Home</a>&nbsp;|</li>
 
      </ul>
    </div>
<div class="sphinxsidebar" role="navigation" aria-label="main navigation">
    <div class="sphinxsidebarwrapper">
  <h3><a href="../">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Changelog</a><ul>
<li><a class="reference internal" href="#release-candidate-1-released">3.0 Release Candidate 1 released</a></li>
<li><a class="reference internal" href="#beta5-released">3.0 beta5 released</a></li>
<li><a class="reference internal" href="#beta4-released">3.0 beta4 released</a></li>
<li><a class="reference internal" href="#beta3-released">3.0 beta3 released</a></li>
<li><a class="reference internal" href="#beta2-released">3.0 beta2 released</a></li>
<li><a class="reference internal" href="#beta1-released">3.0 beta1 released</a></li>
<li><a class="reference internal" href="#milestone-6-released-2016-04-23">Milestone 6 released (2016-04-23)</a></li>
<li><a class="reference internal" href="#milestone-5-released-2016-04-14">Milestone 5 released (2016-04-14)</a></li>
<li><a class="reference internal" href="#milestone-4-released-2016-03-28">3.0.0 Milestone 4 released (2016-03-28)</a></li>
<li><a class="reference internal" href="#milestone-3-released-2016-03-10">3.0.0 Milestone 3 released (2016-03-10)</a></li>
<li><a class="reference internal" href="#milestone-2-released-2016-02-12">3.0.0 Milestone 2 released (2016-02-12)</a></li>
<li><a class="reference internal" href="#mapdb-1-and-2">MapDB 1 and 2</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><div class="sitemap">
    <h3>Site Map</h3>
    <ul>
        <li><a href="/support/">Support</a></li>
        <li><a href="/blog/">Blog</a></li>
        <li><a href="/success/">Who is using MapDB</a></li>
        <li><a href="/benchmarks/">Benchmarks</a></li>
        <li><a href="/changelog/">Changelog</a></li>
        <li><a href="/credits/">Credits</a></li>
        <!--<li><a href="/careers/">Careers</a></li>-->

        <li><a href="/doc/">Documentation</a><ul>
            <li><a href="/doc/intro/">Intro</a></li>
            <li><a href="/doc/quick-start/">Quick start</a></li>
            <li><a href="/doc/db/">DB and DBMaker</a></li>
            <li><a href="/doc/htreemap/">HTreeMap</a></li>
            <li><a href="/doc/btreemap/">BTreeMap</a></li>
            <li><a href="/doc/sortedtablemap/">Sorted Table Map</a></li>
        </ul></li>
        <li><a href="/dokka/latest/mapdb/org.mapdb/">Dokka</a></li>
        <li><a href="/javadoc/latest/mapdb">Javadoc</a></li>
    </ul>

    <h3>Links</h3>
    <ul>
        <li><a href="https://www.github.com/jankotek/mapdb/">Github</a>
        <li><a href="https://www.github.com/jankotek/mapdb/issues/">Issue tracker</a>
        <li><a href="https://groups.google.com/forum/#!forum/mapdb">Mail list</a></li>
        <li><a href="https://www.reddit.com/r/mapdb">Reddit forum</a></li>
        <li><a href="https://gitter.im/jankotek/mapdb">Gitter chat</a></li>
    </ul>
</div>
    </div>
</div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="release-candidate-1-released">
<h2>3.0 Release Candidate 1 released<a class="headerlink" href="#release-candidate-1-released" title="Permalink to this headline">¶</a></h2>
<p>Maven version number: <code class="docutils literal"><span class="pre">3.0.0-RC1</span></code>, release date 2016-06-06</p>
<p>Number of small improvements. At this point MapDB has no obvious bugs.
If no bugs are found this version will become stable release.</p>
<p>No changes in format or API.</p>
<p>Changes:</p>
<ul class="simple">
<li>added <code class="docutils literal"><span class="pre">Store.fileLoad()</span></code> method. Content of memory mapped file can be loaded into memory by <code class="docutils literal"><span class="pre">db.getStore().fileLoad()</span></code></li>
<li>added <code class="docutils literal"><span class="pre">DBMaker.allocationIncrement()</span></code> to minimize number of memory mapped chunks.  This is workaround for <em>too many file handles</em>, see <a class="reference external" href="https://github.com/jankotek/mapdb/issues/723">#723</a></li>
<li>Added documentation</li>
<li>Rework close methods to be thread safe, do not throw exception on second close.</li>
<li>Make <code class="docutils literal"><span class="pre">Store.commit()</span></code> and <code class="docutils literal"><span class="pre">Store.rollback()</span></code> thread safe.</li>
<li>BTreeMap: external values were not deleted after removal</li>
<li>Store: add <code class="docutils literal"><span class="pre">getAllFiles()</span></code> method.</li>
<li>Update Elsa serialization library</li>
</ul>
</div>
<div class="section" id="beta5-released">
<h2>3.0 beta5 released<a class="headerlink" href="#beta5-released" title="Permalink to this headline">¶</a></h2>
<p>Maven version number: <code class="docutils literal"><span class="pre">3.0.0-beta5</span></code>, release date 2016-05-24</p>
<p>This release is fixing data corruption caused by <code class="docutils literal"><span class="pre">StoreWAL</span></code> with transactions enabled. Update is strongly recommended.</p>
<p>No changes in format or API.
3.0.0-beta5``, release date 2016-05-24</p>
<p>This release is fixing data corruption caused by <code class="docutils literal"><span class="pre">StoreWAL</span></code> with transactions enabled. Update is strongly recommended.</p>
<p>No changes in format or API.</p>
</div>
<div class="section" id="beta4-released">
<h2>3.0 beta4 released<a class="headerlink" href="#beta4-released" title="Permalink to this headline">¶</a></h2>
<p>Maven version number: <code class="docutils literal"><span class="pre">3.0.0-beta4</span></code>, release date 2016-05-19</p>
<p><strong>FORMAT CHANGE</strong> POJO serializer format has changed. If you use default serializer together with your own objects, your data might not be readable.
Well known java classes in <code class="docutils literal"><span class="pre">java.lang</span></code> such as <code class="docutils literal"><span class="pre">String</span></code>, <code class="docutils literal"><span class="pre">Long</span></code>, <code class="docutils literal"><span class="pre">BigDecimal</span></code> etc are not affected.</p>
<p>Changes:</p>
<ul class="simple">
<li>reworked Elsa serialization (default serializer) to fix Class Catalog issues.</li>
<li>Elsa serializer now uses <code class="docutils literal"><span class="pre">IdentityHashMap</span></code> for recursive references. Much faster serialization for large object graphs</li>
<li>Rework JVM shutdown hook and <code class="docutils literal"><span class="pre">DB.close()</span></code>, should fix #706.</li>
<li>JVM Shutdown hook now uses single thread for all DBs (memory efficient for many DBs with shutdown hook registered).</li>
<li>JVM Shutdown hook now uses hard reference instead of <code class="docutils literal"><span class="pre">WeakReference</span></code>. There is new option in DBMaker to use weak ref.</li>
<li>Fix <code class="docutils literal"><span class="pre">BTreeMap.put</span></code> caused <code class="docutils literal"><span class="pre">ArrayIndexOutOfBoundsException</span></code>. Fix #707</li>
<li><code class="docutils literal"><span class="pre">BTreeMap.prefixSubmap</span></code> now works with more primitive arrays (<code class="docutils literal"><span class="pre">int[]</span></code>, <code class="docutils literal"><span class="pre">long[]</span></code> etc..). Credit Dmitriy Shabanov</li>
<li>fix various small issues to make acceptance tests pass</li>
<li>Kotlin updated to 1.0.2</li>
<li>HTreeMap has new options to clear map content with expiration triggers. See #708.</li>
</ul>
</div>
<div class="section" id="beta3-released">
<h2>3.0 beta3 released<a class="headerlink" href="#beta3-released" title="Permalink to this headline">¶</a></h2>
<p>Maven version number: <code class="docutils literal"><span class="pre">3.0.0-beta3</span></code>, release date 2016-05-08</p>
<p>Fixed performance in HTreeMap, user serializers and file locking.</p>
<p>No changes in storage format or API.</p>
<p>Changes:</p>
<ul class="simple">
<li>DB: throw IllegalAccessError on access after DB was closed</li>
<li>DB: make serializers optional in name catalog</li>
<li><code class="docutils literal"><span class="pre">DB.fileLockDisable()</span></code> would not work. Fixed</li>
<li>Added option <code class="docutils literal"><span class="pre">DB.fileLockWait()</span></code> to block until file lock is released by second JVM #693. There is optional timeout.</li>
<li>HTreeMap and IndexTreeList default sizes were to small,
list would throw assertion error after 64K records, HTreeMap was slow due to huge number of collisions.
Default size changed from 64K to 1E9</li>
</ul>
</div>
<div class="section" id="beta2-released">
<h2>3.0 beta2 released<a class="headerlink" href="#beta2-released" title="Permalink to this headline">¶</a></h2>
<p>Maven version number: <code class="docutils literal"><span class="pre">3.0.0-beta2</span></code>, release date 2016-05-01</p>
<p>This release is fixing <strong>data corruption issue</strong>. Compaction on <code class="docutils literal"><span class="pre">StoreDirect</span></code> will corrupt storage
if there is record smaller then 6 bytes (affects <code class="docutils literal"><span class="pre">HTreeMap</span></code> and <code class="docutils literal"><span class="pre">BTreeMap</span></code>).</p>
<p>Second bugfix is on <code class="docutils literal"><span class="pre">BTreeMap</span></code>, it would not call modification listeners.</p>
<p>No changes in storage format or API.</p>
</div>
<div class="section" id="beta1-released">
<h2>3.0 beta1 released<a class="headerlink" href="#beta1-released" title="Permalink to this headline">¶</a></h2>
<p>Maven version number: <code class="docutils literal"><span class="pre">3.0.0-beta1</span></code>, release date 2016-04-28</p>
<p>First semi-stable release. Storage format and API (<code class="docutils literal"><span class="pre">DB</span></code>, <code class="docutils literal"><span class="pre">DBMaker</span></code>) should be
stable from now on.</p>
<p><strong>Storage format change:</strong>
Format has changed, files generated by M6 and older should not be opened with this version.</p>
</div>
<div class="section" id="milestone-6-released-2016-04-23">
<h2>Milestone 6 released (2016-04-23)<a class="headerlink" href="#milestone-6-released-2016-04-23" title="Permalink to this headline">¶</a></h2>
<p>Maven version number: <code class="docutils literal"><span class="pre">3.0.0-M6</span></code></p>
<ul class="simple">
<li>Fixed BTreeMap race condition <a class="reference external" href="https://github.com/jankotek/mapdb/issues/664">#664</a>.</li>
<li>Improved POJO serialization (Elsa) dependency.</li>
<li>MapDB now should handle and use class catalog.</li>
<li>Added several tests to test concurrency</li>
<li>Memory mapped file preclear no longer sync file. Faster file growth.</li>
</ul>
<p><strong>Storage format change:</strong>
Maximal record ID increased. Older storage format should be still readable.</p>
</div>
<div class="section" id="milestone-5-released-2016-04-14">
<h2>Milestone 5 released (2016-04-14)<a class="headerlink" href="#milestone-5-released-2016-04-14" title="Permalink to this headline">¶</a></h2>
<p>Maven version number: <code class="docutils literal"><span class="pre">3.0.0-M5</span></code></p>
<p>There are several new options ported from 2.0 branch. Transactions are disabled by default,
use <cite>DBMaker.transactionEnable()</cite> to enable it.</p>
<p>There is <a class="reference external" href="/news/migrating_to_30/">a new blog post</a> for 2.0 users who would like to use new 3.0 branch</p>
</div>
<div class="section" id="milestone-4-released-2016-03-28">
<h2>3.0.0 Milestone 4 released (2016-03-28)<a class="headerlink" href="#milestone-4-released-2016-03-28" title="Permalink to this headline">¶</a></h2>
<p>Maven version number: <code class="docutils literal"><span class="pre">3.0.0-M4</span></code></p>
<p>M4 fixes Store reopen <a class="reference external" href="https://github.com/jankotek/mapdb/issues/680">issue</a>.</p>
</div>
<div class="section" id="milestone-3-released-2016-03-10">
<h2>3.0.0 Milestone 3 released (2016-03-10)<a class="headerlink" href="#milestone-3-released-2016-03-10" title="Permalink to this headline">¶</a></h2>
<p>Maven version number: <code class="docutils literal"><span class="pre">3.0.0-M3</span></code></p>
<p>Next release towards stable 3.0. Some features are not yet implemented, most notably memory mapped files and transactions.</p>
</div>
<div class="section" id="milestone-2-released-2016-02-12">
<h2>3.0.0 Milestone 2 released (2016-02-12)<a class="headerlink" href="#milestone-2-released-2016-02-12" title="Permalink to this headline">¶</a></h2>
<p>Maven version number: <code class="docutils literal"><span class="pre">3.0.0-M3</span></code></p>
<p>This version adds BTreeMap</p>
</div>
<div class="section" id="mapdb-1-and-2">
<h2>MapDB 1 and 2<a class="headerlink" href="#mapdb-1-and-2" title="Permalink to this headline">¶</a></h2>
<p>Older changelog is in <a class="reference external" href="../changelog-archive">archive</a></p>
</div>
</div>

  <div class="section">
  
  
  </div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../benchmarks/" title="In-memory benchmarks"
             >next</a></li>
        <li class="right" >
          <a href="../success/" title="Who is using MapDB"
             >previous</a> |</li>
        <li><a href="../">Home</a>&nbsp;|</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, jan.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.3.
    </div>
  </body>
</html>