<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_45) on Tue Jul 15 16:21:34 EEST 2014 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
Engine (mapdb 1.0.5 API)
</TITLE>

<META NAME="date" CONTENT="2014-07-15">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Engine (mapdb 1.0.5 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../org/mapdb/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Engine.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../org/mapdb/EncryptionXTEA.html" title="class in org.mapdb"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../org/mapdb/EngineWrapper.html" title="class in org.mapdb"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?org/mapdb/Engine.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Engine.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.mapdb</FONT>
<BR>
Interface Engine</H2>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../org/mapdb/AsyncWriteEngine.html" title="class in org.mapdb">AsyncWriteEngine</A>, <A HREF="../../org/mapdb/Caches.HardRef.html" title="class in org.mapdb">Caches.HardRef</A>, <A HREF="../../org/mapdb/Caches.HashTable.html" title="class in org.mapdb">Caches.HashTable</A>, <A HREF="../../org/mapdb/Caches.LRU.html" title="class in org.mapdb">Caches.LRU</A>, <A HREF="../../org/mapdb/Caches.WeakSoftRef.html" title="class in org.mapdb">Caches.WeakSoftRef</A>, <A HREF="../../org/mapdb/EngineWrapper.html" title="class in org.mapdb">EngineWrapper</A>, <A HREF="../../org/mapdb/EngineWrapper.CloseOnJVMShutdown.html" title="class in org.mapdb">EngineWrapper.CloseOnJVMShutdown</A>, <A HREF="../../org/mapdb/EngineWrapper.ImmutabilityCheckEngine.html" title="class in org.mapdb">EngineWrapper.ImmutabilityCheckEngine</A>, <A HREF="../../org/mapdb/EngineWrapper.ReadOnlyEngine.html" title="class in org.mapdb">EngineWrapper.ReadOnlyEngine</A>, <A HREF="../../org/mapdb/EngineWrapper.SerializerCheckEngineWrapper.html" title="class in org.mapdb">EngineWrapper.SerializerCheckEngineWrapper</A>, <A HREF="../../org/mapdb/EngineWrapper.SynchronizedEngineWrapper.html" title="class in org.mapdb">EngineWrapper.SynchronizedEngineWrapper</A>, <A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">Store</A>, <A HREF="../../org/mapdb/StoreDirect.html" title="class in org.mapdb">StoreDirect</A>, <A HREF="../../org/mapdb/StoreHeap.html" title="class in org.mapdb">StoreHeap</A>, <A HREF="../../org/mapdb/StoreWAL.html" title="class in org.mapdb">StoreWAL</A>, <A HREF="../../org/mapdb/TxEngine.html" title="class in org.mapdb">TxEngine</A>, <A HREF="../../org/mapdb/TxEngine.Tx.html" title="class in org.mapdb">TxEngine.Tx</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>Engine</B></DL>
</PRE>

<P>
Centerpiece for record management, `Engine` is simple key value store.
 Engine is low-level interface and is not meant to be used directly
 by user. For most operations user should use <A HREF="../../org/mapdb/DB.html" title="class in org.mapdb"><CODE>DB</CODE></A> class.

 In this store key is primitive `long` number, typically pointer to index table.
 Value is class instance. To turn value into/from binary form serializer is
 required as extra argument for most operations.

 Unlike other DBs MapDB does not expect user to (de)serialize data before
 they are passed as arguments. Instead MapDB controls (de)serialization itself.
 This gives DB a lot of flexibility: for example instances may be held in
 cache to minimise number of deserializations, or modified instance can
 be placed into queue and asynchronously written on background thread.

 There is <A HREF="../../org/mapdb/Store.html" title="class in org.mapdb"><CODE>Store</CODE></A> subinterface for raw persistence
 Most of MapDB features comes from <A HREF="../../org/mapdb/EngineWrapper.html" title="class in org.mapdb"><CODE>EngineWrapper</CODE></A>s, which are stacked on
 top of each other to provide asynchronous writes, instance cache, encryption etc..
 `Engine` stack is very elegant and uniform way to handle additional functionality.
 Other DBs need an ORM framework to achieve similar features.

 In default configuration MapDB runs with this `Engine` stack:

  * **DISK** - raw file or memory
  * <A HREF="../../org/mapdb/StoreWAL.html" title="class in org.mapdb"><CODE>StoreWAL</CODE></A> - permanent record store with transactions
  * <A HREF="../../org/mapdb/Caches.HashTable.html" title="class in org.mapdb"><CODE>Caches.HashTable</CODE></A> - instance cache
  * **USER** - <A HREF="../../org/mapdb/DB.html" title="class in org.mapdb"><CODE>DB</CODE></A> and collections

 TODO document more examples of Engine  wrappers

 Engine uses `recid` to identify records. There is zero error handling in case recid is invalid
 (random number or already deleted record). Passing illegal recid may result into anything
 (return null, throw EOF or even corrupt store). Engine is considered low-level component
 and it is responsibility of upper layers (collections) to ensure recid is consistent.
 Lack of error handling is trade of for speed (similar way as manual memory management in C++)
 <p/>
 Engine must support `null` record values. You may insert, update and fetch null records.
 Nulls play important role in recid preallocation and asynchronous writes.
 <p/>
 Recid can be reused after it was deleted. If your application relies on unique being unique,
 you should update record with null value, instead of delete.
 Null record consumes only 8 bytes in store and is preserved during defragmentation.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Jan Kotek</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#CATALOG_RECID">CATALOG_RECID</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#CHECK_RECORD">CHECK_RECORD</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#CLASS_INFO_RECID">CLASS_INFO_RECID</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#LAST_RESERVED_RECID">LAST_RESERVED_RECID</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#canRollback()">canRollback</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#canSnapshot()">canSnapshot</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#clearCache()">clearCache</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clears any underlying cache</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Close store/cache.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#closeListenerRegister(java.lang.Runnable)">closeListenerRegister</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</A>&nbsp;closeListener)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#closeListenerUnregister(java.lang.Runnable)">closeListenerUnregister</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</A>&nbsp;closeListener)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#commit()">commit</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Makes all changes made since the previous commit/rollback permanent.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#compact()">compact</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" SUMMARY="">
<TR ALIGN="right" VALIGN="">
<TD NOWRAP><FONT SIZE="-1">
<CODE>&lt;A&gt; boolean</CODE></FONT></TD>
</TR>
</TABLE>
</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#compareAndSwap(long, A, A, org.mapdb.Serializer)">compareAndSwap</A></B>(long&nbsp;recid,
               A&nbsp;expectedOldValue,
               A&nbsp;newValue,
               <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Updates existing record in atomic <a href="http://en.wikipedia.org/wiki/Compare-and-swap">(Compare And Swap)</a> manner.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" SUMMARY="">
<TR ALIGN="right" VALIGN="">
<TD NOWRAP><FONT SIZE="-1">
<CODE>&lt;A&gt; void</CODE></FONT></TD>
</TR>
</TABLE>
</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#delete(long, org.mapdb.Serializer)">delete</A></B>(long&nbsp;recid,
       <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove existing record from store/cache

 <p/>
 Recid must be a number returned by 'put' method.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" SUMMARY="">
<TR ALIGN="right" VALIGN="">
<TD NOWRAP><FONT SIZE="-1">
<CODE>&lt;A&gt; A</CODE></FONT></TD>
</TR>
</TABLE>
</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#get(long, org.mapdb.Serializer)">get</A></B>(long&nbsp;recid,
    <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get existing record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../org/mapdb/SerializerPojo.html" title="class in org.mapdb">SerializerPojo</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#getSerializerPojo()">getSerializerPojo</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#isClosed()">isClosed</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks whether Engine was closed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#isReadOnly()">isReadOnly</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check if you can write into this Engine.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#preallocate()">preallocate</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Preallocates recid for not yet created record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#preallocate(long[])">preallocate</A></B>(long[]&nbsp;recids)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Preallocates recids  for not yet created record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" SUMMARY="">
<TR ALIGN="right" VALIGN="">
<TD NOWRAP><FONT SIZE="-1">
<CODE>&lt;A&gt; long</CODE></FONT></TD>
</TR>
</TABLE>
</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#put(A, org.mapdb.Serializer)">put</A></B>(A&nbsp;value,
    <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Insert new record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#rollback()">rollback</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Undoes all changes made in the current transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#snapshot()">snapshot</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns read-only snapshot of data in Engine.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" SUMMARY="">
<TR ALIGN="right" VALIGN="">
<TD NOWRAP><FONT SIZE="-1">
<CODE>&lt;A&gt; void</CODE></FONT></TD>
</TR>
</TABLE>
</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/Engine.html#update(long, A, org.mapdb.Serializer)">update</A></B>(long&nbsp;recid,
       A&nbsp;value,
       <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update existing record with new value.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="CATALOG_RECID"><!-- --></A><H3>
CATALOG_RECID</H3>
<PRE>
static final long <B>CATALOG_RECID</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#org.mapdb.Engine.CATALOG_RECID">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="CLASS_INFO_RECID"><!-- --></A><H3>
CLASS_INFO_RECID</H3>
<PRE>
static final long <B>CLASS_INFO_RECID</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#org.mapdb.Engine.CLASS_INFO_RECID">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="CHECK_RECORD"><!-- --></A><H3>
CHECK_RECORD</H3>
<PRE>
static final long <B>CHECK_RECORD</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#org.mapdb.Engine.CHECK_RECORD">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="LAST_RESERVED_RECID"><!-- --></A><H3>
LAST_RESERVED_RECID</H3>
<PRE>
static final long <B>LAST_RESERVED_RECID</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#org.mapdb.Engine.LAST_RESERVED_RECID">Constant Field Values</A></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="preallocate()"><!-- --></A><H3>
preallocate</H3>
<PRE>
long <B>preallocate</B>()</PRE>
<DL>
<DD>Preallocates recid for not yet created record. It does not insert any data into it.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>new recid</DL>
</DD>
</DL>
<HR>

<A NAME="preallocate(long[])"><!-- --></A><H3>
preallocate</H3>
<PRE>
void <B>preallocate</B>(long[]&nbsp;recids)</PRE>
<DL>
<DD>Preallocates recids  for not yet created record. It does not insert any data into it.
 This is done in batch of given size (determied by size of array in argument)
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recids</CODE> - array to put result into</DL>
</DD>
</DL>
<HR>

<A NAME="put(java.lang.Object,org.mapdb.Serializer)"><!-- --></A><A NAME="put(A, org.mapdb.Serializer)"><!-- --></A><H3>
put</H3>
<PRE>
&lt;A&gt; long <B>put</B>(A&nbsp;value,
             <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</PRE>
<DL>
<DD>Insert new record.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>value</CODE> - records to be added<DD><CODE>serializer</CODE> - used to convert record into/from binary form
<DT><B>Returns:</B><DD>recid (record identifier) under which record is stored.</DL>
</DD>
</DL>
<HR>

<A NAME="get(long, org.mapdb.Serializer)"><!-- --></A><H3>
get</H3>
<PRE>
&lt;A&gt; A <B>get</B>(long&nbsp;recid,
          <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</PRE>
<DL>
<DD>Get existing record.
 <p/>
 Recid must be a number returned by 'put' method.
 Behaviour for invalid recid (random number or already deleted record)
 is not defined, typically it returns null or throws 'EndOfFileException'
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recid</CODE> - (record identifier) under which record was persisted<DD><CODE>serializer</CODE> - used to deserialize record from binary form
<DT><B>Returns:</B><DD>record matching given recid, or null if record is not found under given recid.</DL>
</DD>
</DL>
<HR>

<A NAME="update(long,java.lang.Object,org.mapdb.Serializer)"><!-- --></A><A NAME="update(long, A, org.mapdb.Serializer)"><!-- --></A><H3>
update</H3>
<PRE>
&lt;A&gt; void <B>update</B>(long&nbsp;recid,
                A&nbsp;value,
                <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</PRE>
<DL>
<DD>Update existing record with new value.
 <p/>
 Recid must be a number returned by 'put' method.
 Behaviour for invalid recid (random number or already deleted record)
 is not defined, typically it throws 'EndOfFileException',
 but it may also corrupt store.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recid</CODE> - (record identifier) under which record was persisted.<DD><CODE>value</CODE> - new record value to be stored<DD><CODE>serializer</CODE> - used to serialize record into binary form</DL>
</DD>
</DL>
<HR>

<A NAME="compareAndSwap(long,java.lang.Object,java.lang.Object,org.mapdb.Serializer)"><!-- --></A><A NAME="compareAndSwap(long, A, A, org.mapdb.Serializer)"><!-- --></A><H3>
compareAndSwap</H3>
<PRE>
&lt;A&gt; boolean <B>compareAndSwap</B>(long&nbsp;recid,
                           A&nbsp;expectedOldValue,
                           A&nbsp;newValue,
                           <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</PRE>
<DL>
<DD>Updates existing record in atomic <a href="http://en.wikipedia.org/wiki/Compare-and-swap">(Compare And Swap)</a> manner.
 Value is modified only if old value matches expected value. There are three ways to match values, MapDB may use any of them:
 <ol>
    <li>Equality check <code>oldValue==expectedOldValue</code> when old value is found in instance cache</li>
    <li>Deserializing <code>oldValue</code> using <code>serializer</code> and checking <code>oldValue.equals(expectedOldValue)</code></li>
    <li>Serializing <code>expectedOldValue</code> using <code>serializer </code> and comparing binary array with already serialized <code>oldValue</code>
 </ol>
 <p/>
 Recid must be a number returned by 'put' method.
 Behaviour for invalid recid (random number or already deleted record)
 is not defined, typically it throws 'EndOfFileException',
 but it may also corrupt store.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recid</CODE> - (record identifier) under which record was persisted.<DD><CODE>expectedOldValue</CODE> - old value to be compared with existing record<DD><CODE>newValue</CODE> - to be written if values are matching<DD><CODE>serializer</CODE> - used to serialize record into binary form
<DT><B>Returns:</B><DD>true if values matched and newValue was written</DL>
</DD>
</DL>
<HR>

<A NAME="delete(long, org.mapdb.Serializer)"><!-- --></A><H3>
delete</H3>
<PRE>
&lt;A&gt; void <B>delete</B>(long&nbsp;recid,
                <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</PRE>
<DL>
<DD>Remove existing record from store/cache

 <p/>
 Recid must be a number returned by 'put' method.
 Behaviour for invalid recid (random number or already deleted record)
 is not defined, typically it throws 'EndOfFileException',
 but it may also corrupt store.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recid</CODE> - (record identifier) under which was record persisted<DD><CODE>serializer</CODE> - which may be used in some circumstances to deserialize and store old object</DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
void <B>close</B>()</PRE>
<DL>
<DD>Close store/cache. This method must be called before JVM exits to flush all caches and prevent store corruption.
 Also it releases resources used by MapDB (disk, memory..).
 <p/>
 Engine can no longer be used after this method was called. If Engine is used after closing, it may
 throw any exception including <code>NullPointerException</code>
 </p>
 There is an configuration option <A HREF="../../org/mapdb/DBMaker.html#closeOnJvmShutdown()"><CODE>DBMaker.closeOnJvmShutdown()</CODE></A> which uses shutdown hook to automatically
 close Engine when JVM shutdowns.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isClosed()"><!-- --></A><H3>
isClosed</H3>
<PRE>
boolean <B>isClosed</B>()</PRE>
<DL>
<DD>Checks whether Engine was closed.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if engine was closed</DL>
</DD>
</DL>
<HR>

<A NAME="commit()"><!-- --></A><H3>
commit</H3>
<PRE>
void <B>commit</B>()</PRE>
<DL>
<DD>Makes all changes made since the previous commit/rollback permanent.
 In transactional mode (on by default) it means creating journal file and replaying it to storage.
 In other modes it may flush disk caches or do nothing at all (check your config options)
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="rollback()"><!-- --></A><H3>
rollback</H3>
<PRE>
void <B>rollback</B>()
              throws <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</A></PRE>
<DL>
<DD>Undoes all changes made in the current transaction.
 If transactions are disabled it throws <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang"><CODE>UnsupportedOperationException</CODE></A>.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</A></CODE> - if transactions are disabled</DL>
</DD>
</DL>
<HR>

<A NAME="isReadOnly()"><!-- --></A><H3>
isReadOnly</H3>
<PRE>
boolean <B>isReadOnly</B>()</PRE>
<DL>
<DD>Check if you can write into this Engine. It may be readonly in some cases (snapshot, read-only files).
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if engine is read-only</DL>
</DD>
</DL>
<HR>

<A NAME="canRollback()"><!-- --></A><H3>
canRollback</H3>
<PRE>
boolean <B>canRollback</B>()</PRE>
<DL>
<DD><DL>

<DT><B>Returns:</B><DD>true if engine supports rollback</DL>
</DD>
</DL>
<HR>

<A NAME="canSnapshot()"><!-- --></A><H3>
canSnapshot</H3>
<PRE>
boolean <B>canSnapshot</B>()</PRE>
<DL>
<DD><DL>

<DT><B>Returns:</B><DD>true if engine can create read-only snapshots</DL>
</DD>
</DL>
<HR>

<A NAME="snapshot()"><!-- --></A><H3>
snapshot</H3>
<PRE>
<A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A> <B>snapshot</B>()
                throws <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</A></PRE>
<DL>
<DD>Returns read-only snapshot of data in Engine.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</A></CODE> - if snapshots are not supported/enabled<DT><B>See Also:</B><DD><A HREF="../../org/mapdb/EngineWrapper.html#canSnapshot()"><CODE>EngineWrapper.canSnapshot()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="clearCache()"><!-- --></A><H3>
clearCache</H3>
<PRE>
void <B>clearCache</B>()</PRE>
<DL>
<DD>clears any underlying cache
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="compact()"><!-- --></A><H3>
compact</H3>
<PRE>
void <B>compact</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getSerializerPojo()"><!-- --></A><H3>
getSerializerPojo</H3>
<PRE>
<FONT SIZE="-1"><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang">@Deprecated</A>
</FONT><A HREF="../../org/mapdb/SerializerPojo.html" title="class in org.mapdb">SerializerPojo</A> <B>getSerializerPojo</B>()</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;
<P>
<DD>Returns default serializer associated with this engine.
 The default serializer will be moved from Engine into DB, so it is deprecated now and
 this method will be removed.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="closeListenerRegister(java.lang.Runnable)"><!-- --></A><H3>
closeListenerRegister</H3>
<PRE>
void <B>closeListenerRegister</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</A>&nbsp;closeListener)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="closeListenerUnregister(java.lang.Runnable)"><!-- --></A><H3>
closeListenerUnregister</H3>
<PRE>
void <B>closeListenerUnregister</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</A>&nbsp;closeListener)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../org/mapdb/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Engine.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../org/mapdb/EncryptionXTEA.html" title="class in org.mapdb"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../org/mapdb/EngineWrapper.html" title="class in org.mapdb"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?org/mapdb/Engine.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Engine.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2014. All Rights Reserved.
</BODY>
</HTML>
