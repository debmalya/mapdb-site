<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_45) on Tue Jul 15 16:21:35 EEST 2014 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
StoreHeap (mapdb 1.0.5 API)
</TITLE>

<META NAME="date" CONTENT="2014-07-15">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="StoreHeap (mapdb 1.0.5 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../org/mapdb/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/StoreHeap.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../org/mapdb/StoreDirect.html" title="class in org.mapdb"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../org/mapdb/StoreWAL.html" title="class in org.mapdb"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?org/mapdb/StoreHeap.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="StoreHeap.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.mapdb</FONT>
<BR>
Class StoreHeap</H2>
<PRE>
<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">org.mapdb.Store</A>
      <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>org.mapdb.StoreHeap</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="http://java.sun.com/javase/6/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</A>, <A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>StoreHeap</B><DT>extends <A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">Store</A><DT>implements <A HREF="http://java.sun.com/javase/6/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</A></DL>
</PRE>

<P>
Store which keeps all instances on heap. It does not use serialization.
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../serialized-form.html#org.mapdb.StoreHeap">Serialized Form</A></DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/util/Queue.html?is-external=true" title="class or interface in java.util">Queue</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#freeRecids">freeRecids</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Queue of deleted recids, those are reused for new records</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicLong.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicLong</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#maxRecid">maxRecid</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Maximal returned recid, incremented if there are no free recids</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#NULL">NULL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/util/concurrent/ConcurrentNavigableMap.html?is-external=true" title="class or interface in java.util.concurrent">ConcurrentNavigableMap</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</A>,<A HREF="../../org/mapdb/Fun.Tuple2.html" title="class in org.mapdb">Fun.Tuple2</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#records">records</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All commited records in store</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/util/concurrent/ConcurrentNavigableMap.html?is-external=true" title="class or interface in java.util.concurrent">ConcurrentNavigableMap</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</A>,<A HREF="../../org/mapdb/Fun.Tuple2.html" title="class in org.mapdb">Fun.Tuple2</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#rollback">rollback</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All not-yet commited records in store</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;<A HREF="../../org/mapdb/Fun.Tuple2.html" title="class in org.mapdb">Fun.Tuple2</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#TOMBSTONE">TOMBSTONE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_org.mapdb.Store"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from class org.mapdb.<A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">Store</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../org/mapdb/Store.html#checksum">checksum</A>, <A HREF="../../org/mapdb/Store.html#CHECKSUM_FLAG_MASK">CHECKSUM_FLAG_MASK</A>, <A HREF="../../org/mapdb/Store.html#CHUNK_SIZE">CHUNK_SIZE</A>, <A HREF="../../org/mapdb/Store.html#CHUNK_SIZE_MOD_MASK">CHUNK_SIZE_MOD_MASK</A>, <A HREF="../../org/mapdb/Store.html#compress">compress</A>, <A HREF="../../org/mapdb/Store.html#COMPRESS_FLAG_MASK">COMPRESS_FLAG_MASK</A>, <A HREF="../../org/mapdb/Store.html#encrypt">encrypt</A>, <A HREF="../../org/mapdb/Store.html#ENCRYPT_FLAG_MASK">ENCRYPT_FLAG_MASK</A>, <A HREF="../../org/mapdb/Store.html#encryptionXTEA">encryptionXTEA</A>, <A HREF="../../org/mapdb/Store.html#locks">locks</A>, <A HREF="../../org/mapdb/Store.html#LOG">LOG</A>, <A HREF="../../org/mapdb/Store.html#LZF">LZF</A>, <A HREF="../../org/mapdb/Store.html#newRecidLock">newRecidLock</A>, <A HREF="../../org/mapdb/Store.html#password">password</A>, <A HREF="../../org/mapdb/Store.html#recycledDataOuts">recycledDataOuts</A>, <A HREF="../../org/mapdb/Store.html#serializerPojo">serializerPojo</A>, <A HREF="../../org/mapdb/Store.html#serializerPojoInitLock">serializerPojoInitLock</A>, <A HREF="../../org/mapdb/Store.html#structuralLock">structuralLock</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_org.mapdb.Engine"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from interface org.mapdb.<A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../org/mapdb/Engine.html#CATALOG_RECID">CATALOG_RECID</A>, <A HREF="../../org/mapdb/Engine.html#CHECK_RECORD">CHECK_RECORD</A>, <A HREF="../../org/mapdb/Engine.html#CLASS_INFO_RECID">CLASS_INFO_RECID</A>, <A HREF="../../org/mapdb/Engine.html#LAST_RESERVED_RECID">LAST_RESERVED_RECID</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#StoreHeap()">StoreHeap</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#calculateStatistics()">calculateStatistics</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get some statistics about store.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#canRollback()">canRollback</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#clearCache()">clearCache</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clears any underlying cache</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Close store/cache.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#commit()">commit</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Makes all changes made since the previous commit/rollback permanent.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#compact()">compact</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" SUMMARY="">
<TR ALIGN="right" VALIGN="">
<TD NOWRAP><FONT SIZE="-1">
<CODE>&lt;A&gt; boolean</CODE></FONT></TD>
</TR>
</TABLE>
</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#compareAndSwap(long, A, A, org.mapdb.Serializer)">compareAndSwap</A></B>(long&nbsp;recid,
               A&nbsp;expectedOldValue,
               A&nbsp;newValue,
               <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Updates existing record in atomic <a href="http://en.wikipedia.org/wiki/Compare-and-swap">(Compare And Swap)</a> manner.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" SUMMARY="">
<TR ALIGN="right" VALIGN="">
<TD NOWRAP><FONT SIZE="-1">
<CODE>&lt;A&gt; void</CODE></FONT></TD>
</TR>
</TABLE>
</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#delete(long, org.mapdb.Serializer)">delete</A></B>(long&nbsp;recid,
       <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove existing record from store/cache

 <p/>
 Recid must be a number returned by 'put' method.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" SUMMARY="">
<TR ALIGN="right" VALIGN="">
<TD NOWRAP><FONT SIZE="-1">
<CODE>&lt;A&gt; A</CODE></FONT></TD>
</TR>
</TABLE>
</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#get(long, org.mapdb.Serializer)">get</A></B>(long&nbsp;recid,
    <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get existing record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#getCurrSize()">getCurrSize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns current size occupied by physical store (does not include index).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#getFreeRecids()">getFreeRecids</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#getFreeSize()">getFreeSize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns free size in  physical store (does not include index).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#getMaxRecid()">getMaxRecid</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#getRaw(long)">getRaw</A></B>(long&nbsp;recid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#getSizeLimit()">getSizeLimit</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns maximal store size or `0` if there is no limit</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#isClosed()">isClosed</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks whether Engine was closed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#isReadOnly()">isReadOnly</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check if you can write into this Engine.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#preallocate()">preallocate</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Preallocates recid for not yet created record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#preallocate(long[])">preallocate</A></B>(long[]&nbsp;recids)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Preallocates recids  for not yet created record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" SUMMARY="">
<TR ALIGN="right" VALIGN="">
<TD NOWRAP><FONT SIZE="-1">
<CODE>&lt;A&gt; long</CODE></FONT></TD>
</TR>
</TABLE>
</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#put(A, org.mapdb.Serializer)">put</A></B>(A&nbsp;value,
    <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Insert new record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#rollback()">rollback</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Undoes all changes made in the current transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" SUMMARY="">
<TR ALIGN="right" VALIGN="">
<TD NOWRAP><FONT SIZE="-1">
<CODE>&lt;A&gt; void</CODE></FONT></TD>
</TR>
</TABLE>
</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#update(long, A, org.mapdb.Serializer)">update</A></B>(long&nbsp;recid,
       A&nbsp;value,
       <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update existing record with new value.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../org/mapdb/StoreHeap.html#updateRaw(long, java.nio.ByteBuffer)">updateRaw</A></B>(long&nbsp;recid,
          <A HREF="http://java.sun.com/javase/6/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</A>&nbsp;data)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.mapdb.Store"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.mapdb.<A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">Store</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../org/mapdb/Store.html#canSnapshot()">canSnapshot</A>, <A HREF="../../org/mapdb/Store.html#closeListenerRegister(java.lang.Runnable)">closeListenerRegister</A>, <A HREF="../../org/mapdb/Store.html#closeListenerUnregister(java.lang.Runnable)">closeListenerUnregister</A>, <A HREF="../../org/mapdb/Store.html#deserialize(org.mapdb.Serializer, int, java.io.DataInput)">deserialize</A>, <A HREF="../../org/mapdb/Store.html#expectedMasks()">expectedMasks</A>, <A HREF="../../org/mapdb/Store.html#forDB(org.mapdb.DB)">forDB</A>, <A HREF="../../org/mapdb/Store.html#forEngine(org.mapdb.Engine)">forEngine</A>, <A HREF="../../org/mapdb/Store.html#getSerializerPojo()">getSerializerPojo</A>, <A HREF="../../org/mapdb/Store.html#lockAllWrite()">lockAllWrite</A>, <A HREF="../../org/mapdb/Store.html#lockPos(long)">lockPos</A>, <A HREF="../../org/mapdb/Store.html#newDataOut2()">newDataOut2</A>, <A HREF="../../org/mapdb/Store.html#printStatistics()">printStatistics</A>, <A HREF="../../org/mapdb/Store.html#serialize(A, org.mapdb.Serializer)">serialize</A>, <A HREF="../../org/mapdb/Store.html#snapshot()">snapshot</A>, <A HREF="../../org/mapdb/Store.html#unlockAllWrite()">unlockAllWrite</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="TOMBSTONE"><!-- --></A><H3>
TOMBSTONE</H3>
<PRE>
protected static final <A HREF="../../org/mapdb/Fun.Tuple2.html" title="class in org.mapdb">Fun.Tuple2</A> <B>TOMBSTONE</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="NULL"><!-- --></A><H3>
NULL</H3>
<PRE>
protected static final <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A> <B>NULL</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="records"><!-- --></A><H3>
records</H3>
<PRE>
protected final <A HREF="http://java.sun.com/javase/6/docs/api/java/util/concurrent/ConcurrentNavigableMap.html?is-external=true" title="class or interface in java.util.concurrent">ConcurrentNavigableMap</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</A>,<A HREF="../../org/mapdb/Fun.Tuple2.html" title="class in org.mapdb">Fun.Tuple2</A>&gt; <B>records</B></PRE>
<DL>
<DD>All commited records in store
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="rollback"><!-- --></A><H3>
rollback</H3>
<PRE>
protected final <A HREF="http://java.sun.com/javase/6/docs/api/java/util/concurrent/ConcurrentNavigableMap.html?is-external=true" title="class or interface in java.util.concurrent">ConcurrentNavigableMap</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</A>,<A HREF="../../org/mapdb/Fun.Tuple2.html" title="class in org.mapdb">Fun.Tuple2</A>&gt; <B>rollback</B></PRE>
<DL>
<DD>All not-yet commited records in store
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="freeRecids"><!-- --></A><H3>
freeRecids</H3>
<PRE>
protected final <A HREF="http://java.sun.com/javase/6/docs/api/java/util/Queue.html?is-external=true" title="class or interface in java.util">Queue</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</A>&gt; <B>freeRecids</B></PRE>
<DL>
<DD>Queue of deleted recids, those are reused for new records
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="maxRecid"><!-- --></A><H3>
maxRecid</H3>
<PRE>
protected final <A HREF="http://java.sun.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicLong.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicLong</A> <B>maxRecid</B></PRE>
<DL>
<DD>Maximal returned recid, incremented if there are no free recids
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="StoreHeap()"><!-- --></A><H3>
StoreHeap</H3>
<PRE>
public <B>StoreHeap</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="preallocate()"><!-- --></A><H3>
preallocate</H3>
<PRE>
public long <B>preallocate</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#preallocate()">Engine</A></CODE></B></DD>
<DD>Preallocates recid for not yet created record. It does not insert any data into it.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#preallocate()">preallocate</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>new recid</DL>
</DD>
</DL>
<HR>

<A NAME="preallocate(long[])"><!-- --></A><H3>
preallocate</H3>
<PRE>
public void <B>preallocate</B>(long[]&nbsp;recids)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#preallocate(long[])">Engine</A></CODE></B></DD>
<DD>Preallocates recids  for not yet created record. It does not insert any data into it.
 This is done in batch of given size (determied by size of array in argument)
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#preallocate(long[])">preallocate</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recids</CODE> - array to put result into</DL>
</DD>
</DL>
<HR>

<A NAME="put(java.lang.Object,org.mapdb.Serializer)"><!-- --></A><A NAME="put(A, org.mapdb.Serializer)"><!-- --></A><H3>
put</H3>
<PRE>
public &lt;A&gt; long <B>put</B>(A&nbsp;value,
                    <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#put(A, org.mapdb.Serializer)">Engine</A></CODE></B></DD>
<DD>Insert new record.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#put(A, org.mapdb.Serializer)">put</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>value</CODE> - records to be added<DD><CODE>serializer</CODE> - used to convert record into/from binary form
<DT><B>Returns:</B><DD>recid (record identifier) under which record is stored.</DL>
</DD>
</DL>
<HR>

<A NAME="get(long, org.mapdb.Serializer)"><!-- --></A><H3>
get</H3>
<PRE>
public &lt;A&gt; A <B>get</B>(long&nbsp;recid,
                 <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#get(long, org.mapdb.Serializer)">Engine</A></CODE></B></DD>
<DD>Get existing record.
 <p/>
 Recid must be a number returned by 'put' method.
 Behaviour for invalid recid (random number or already deleted record)
 is not defined, typically it returns null or throws 'EndOfFileException'
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#get(long, org.mapdb.Serializer)">get</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recid</CODE> - (record identifier) under which record was persisted<DD><CODE>serializer</CODE> - used to deserialize record from binary form
<DT><B>Returns:</B><DD>record matching given recid, or null if record is not found under given recid.</DL>
</DD>
</DL>
<HR>

<A NAME="update(long,java.lang.Object,org.mapdb.Serializer)"><!-- --></A><A NAME="update(long, A, org.mapdb.Serializer)"><!-- --></A><H3>
update</H3>
<PRE>
public &lt;A&gt; void <B>update</B>(long&nbsp;recid,
                       A&nbsp;value,
                       <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#update(long, A, org.mapdb.Serializer)">Engine</A></CODE></B></DD>
<DD>Update existing record with new value.
 <p/>
 Recid must be a number returned by 'put' method.
 Behaviour for invalid recid (random number or already deleted record)
 is not defined, typically it throws 'EndOfFileException',
 but it may also corrupt store.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#update(long, A, org.mapdb.Serializer)">update</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recid</CODE> - (record identifier) under which record was persisted.<DD><CODE>value</CODE> - new record value to be stored<DD><CODE>serializer</CODE> - used to serialize record into binary form</DL>
</DD>
</DL>
<HR>

<A NAME="compareAndSwap(long,java.lang.Object,java.lang.Object,org.mapdb.Serializer)"><!-- --></A><A NAME="compareAndSwap(long, A, A, org.mapdb.Serializer)"><!-- --></A><H3>
compareAndSwap</H3>
<PRE>
public &lt;A&gt; boolean <B>compareAndSwap</B>(long&nbsp;recid,
                                  A&nbsp;expectedOldValue,
                                  A&nbsp;newValue,
                                  <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#compareAndSwap(long, A, A, org.mapdb.Serializer)">Engine</A></CODE></B></DD>
<DD>Updates existing record in atomic <a href="http://en.wikipedia.org/wiki/Compare-and-swap">(Compare And Swap)</a> manner.
 Value is modified only if old value matches expected value. There are three ways to match values, MapDB may use any of them:
 <ol>
    <li>Equality check <code>oldValue==expectedOldValue</code> when old value is found in instance cache</li>
    <li>Deserializing <code>oldValue</code> using <code>serializer</code> and checking <code>oldValue.equals(expectedOldValue)</code></li>
    <li>Serializing <code>expectedOldValue</code> using <code>serializer </code> and comparing binary array with already serialized <code>oldValue</code>
 </ol>
 <p/>
 Recid must be a number returned by 'put' method.
 Behaviour for invalid recid (random number or already deleted record)
 is not defined, typically it throws 'EndOfFileException',
 but it may also corrupt store.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#compareAndSwap(long, A, A, org.mapdb.Serializer)">compareAndSwap</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recid</CODE> - (record identifier) under which record was persisted.<DD><CODE>expectedOldValue</CODE> - old value to be compared with existing record<DD><CODE>newValue</CODE> - to be written if values are matching<DD><CODE>serializer</CODE> - used to serialize record into binary form
<DT><B>Returns:</B><DD>true if values matched and newValue was written</DL>
</DD>
</DL>
<HR>

<A NAME="delete(long, org.mapdb.Serializer)"><!-- --></A><H3>
delete</H3>
<PRE>
public &lt;A&gt; void <B>delete</B>(long&nbsp;recid,
                       <A HREF="../../org/mapdb/Serializer.html" title="interface in org.mapdb">Serializer</A>&lt;A&gt;&nbsp;serializer)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#delete(long, org.mapdb.Serializer)">Engine</A></CODE></B></DD>
<DD>Remove existing record from store/cache

 <p/>
 Recid must be a number returned by 'put' method.
 Behaviour for invalid recid (random number or already deleted record)
 is not defined, typically it throws 'EndOfFileException',
 but it may also corrupt store.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#delete(long, org.mapdb.Serializer)">delete</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recid</CODE> - (record identifier) under which was record persisted<DD><CODE>serializer</CODE> - which may be used in some circumstances to deserialize and store old object</DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <B>close</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#close()">Engine</A></CODE></B></DD>
<DD>Close store/cache. This method must be called before JVM exits to flush all caches and prevent store corruption.
 Also it releases resources used by MapDB (disk, memory..).
 <p/>
 Engine can no longer be used after this method was called. If Engine is used after closing, it may
 throw any exception including <code>NullPointerException</code>
 </p>
 There is an configuration option <A HREF="../../org/mapdb/DBMaker.html#closeOnJvmShutdown()"><CODE>DBMaker.closeOnJvmShutdown()</CODE></A> which uses shutdown hook to automatically
 close Engine when JVM shutdowns.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#close()">close</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isClosed()"><!-- --></A><H3>
isClosed</H3>
<PRE>
public boolean <B>isClosed</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#isClosed()">Engine</A></CODE></B></DD>
<DD>Checks whether Engine was closed.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#isClosed()">isClosed</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>true if engine was closed</DL>
</DD>
</DL>
<HR>

<A NAME="commit()"><!-- --></A><H3>
commit</H3>
<PRE>
public void <B>commit</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#commit()">Engine</A></CODE></B></DD>
<DD>Makes all changes made since the previous commit/rollback permanent.
 In transactional mode (on by default) it means creating journal file and replaying it to storage.
 In other modes it may flush disk caches or do nothing at all (check your config options)
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#commit()">commit</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="rollback()"><!-- --></A><H3>
rollback</H3>
<PRE>
public void <B>rollback</B>()
              throws <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#rollback()">Engine</A></CODE></B></DD>
<DD>Undoes all changes made in the current transaction.
 If transactions are disabled it throws <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang"><CODE>UnsupportedOperationException</CODE></A>.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#rollback()">rollback</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</A></CODE> - if transactions are disabled</DL>
</DD>
</DL>
<HR>

<A NAME="isReadOnly()"><!-- --></A><H3>
isReadOnly</H3>
<PRE>
public boolean <B>isReadOnly</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#isReadOnly()">Engine</A></CODE></B></DD>
<DD>Check if you can write into this Engine. It may be readonly in some cases (snapshot, read-only files).
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#isReadOnly()">isReadOnly</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>true if engine is read-only</DL>
</DD>
</DL>
<HR>

<A NAME="clearCache()"><!-- --></A><H3>
clearCache</H3>
<PRE>
public void <B>clearCache</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../org/mapdb/Engine.html#clearCache()">Engine</A></CODE></B></DD>
<DD>clears any underlying cache
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#clearCache()">clearCache</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="compact()"><!-- --></A><H3>
compact</H3>
<PRE>
public void <B>compact</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#compact()">compact</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="canRollback()"><!-- --></A><H3>
canRollback</H3>
<PRE>
public boolean <B>canRollback</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Engine.html#canRollback()">canRollback</A></CODE> in interface <CODE><A HREF="../../org/mapdb/Engine.html" title="interface in org.mapdb">Engine</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>true if engine supports rollback</DL>
</DD>
</DL>
<HR>

<A NAME="getMaxRecid()"><!-- --></A><H3>
getMaxRecid</H3>
<PRE>
public long <B>getMaxRecid</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Store.html#getMaxRecid()">getMaxRecid</A></CODE> in class <CODE><A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">Store</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getRaw(long)"><!-- --></A><H3>
getRaw</H3>
<PRE>
public <A HREF="http://java.sun.com/javase/6/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</A> <B>getRaw</B>(long&nbsp;recid)</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Store.html#getRaw(long)">getRaw</A></CODE> in class <CODE><A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">Store</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getFreeRecids()"><!-- --></A><H3>
getFreeRecids</H3>
<PRE>
public <A HREF="http://java.sun.com/javase/6/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</A>&gt; <B>getFreeRecids</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Store.html#getFreeRecids()">getFreeRecids</A></CODE> in class <CODE><A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">Store</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="updateRaw(long, java.nio.ByteBuffer)"><!-- --></A><H3>
updateRaw</H3>
<PRE>
public void <B>updateRaw</B>(long&nbsp;recid,
                      <A HREF="http://java.sun.com/javase/6/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</A>&nbsp;data)</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Store.html#updateRaw(long, java.nio.ByteBuffer)">updateRaw</A></CODE> in class <CODE><A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">Store</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getSizeLimit()"><!-- --></A><H3>
getSizeLimit</H3>
<PRE>
public long <B>getSizeLimit</B>()</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../../org/mapdb/Store.html#getSizeLimit()">Store</A></CODE></B></DD>
<DD>returns maximal store size or `0` if there is no limit
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Store.html#getSizeLimit()">getSizeLimit</A></CODE> in class <CODE><A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">Store</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getCurrSize()"><!-- --></A><H3>
getCurrSize</H3>
<PRE>
public long <B>getCurrSize</B>()</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../../org/mapdb/Store.html#getCurrSize()">Store</A></CODE></B></DD>
<DD>returns current size occupied by physical store (does not include index). It means file allocated by physical file
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Store.html#getCurrSize()">getCurrSize</A></CODE> in class <CODE><A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">Store</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getFreeSize()"><!-- --></A><H3>
getFreeSize</H3>
<PRE>
public long <B>getFreeSize</B>()</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../../org/mapdb/Store.html#getFreeSize()">Store</A></CODE></B></DD>
<DD>returns free size in  physical store (does not include index).
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Store.html#getFreeSize()">getFreeSize</A></CODE> in class <CODE><A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">Store</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="calculateStatistics()"><!-- --></A><H3>
calculateStatistics</H3>
<PRE>
public <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>calculateStatistics</B>()</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../../org/mapdb/Store.html#calculateStatistics()">Store</A></CODE></B></DD>
<DD>get some statistics about store. This may require traversing entire store, so it can take some time.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../org/mapdb/Store.html#calculateStatistics()">calculateStatistics</A></CODE> in class <CODE><A HREF="../../org/mapdb/Store.html" title="class in org.mapdb">Store</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../org/mapdb/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/StoreHeap.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../org/mapdb/StoreDirect.html" title="class in org.mapdb"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../org/mapdb/StoreWAL.html" title="class in org.mapdb"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?org/mapdb/StoreHeap.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="StoreHeap.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2014. All Rights Reserved.
</BODY>
</HTML>
